# -*- Makefile -*-
# vim:ft=make:

# library root path
DEPENDENCIES = lib

# currently unused
# RNGSTREAMS     = $(DEPENDENCIES)/RNGStreams
# RNGSTREAMS_CPP = -I$(RNGSTREAMS)

# template lib, only includes needed
EIGEN     = $(DEPENDENCIES)/Eigen
EIGEN_CPP = -I$(EIGEN)

OBJECTS = $(SOURCES:.cpp=.o)

# The following works but is GNU make (check --as-cran warning), and depends on find.
SOURCES = $(wildcard *.cpp) \
	  $(shell find model estimator network logger Eigen sim utils data -name '*.cpp')

PKG_CPPFLAGS = $(SHLIB_OPENMP_CXXFLAGS) -I. $(RNGSTREAMS_CPP) $(EIGEN_CPP) @PKG_CPPFLAGS@
# -UNDEBUG -DR_LEGACY -DPROFILER
PKG_LIBS     = $(SHLIB_OPENMP_CXXFLAGS) $(ARCHLIB) @PKG_LIBS@
# $(LAPACK_LIBS) $(BLAS_LIBS) -lprofiler -ltcmalloc

all: $(SHLIB)
